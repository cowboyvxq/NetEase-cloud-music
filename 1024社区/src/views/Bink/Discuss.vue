<template>
  <div class="discuss">
    <p class="com_title">热门评论({{ comments.replies.length }})</p>
    <div class="comments-box">
      <div
        class="com_content"
        v-for="(item, index) in comments.replies"
        :key="item.id"
      >
        <!-- <p v-for='item in comments.replies' 
            :key="item.id" v-html='item.content'
           ></p> -->
        <div class="user_info">
          <div class="left">
            <img class="avatar" :src="item.author.avatar_url" alt="" />
            <span class="login_name">{{ item.author.loginname }}</span>
            <span class="floor"
              >{{ index + 1 }}楼•{{ formatDate(item.create_at) }}</span
            >
          </div>
          <div class="right">点赞</div>
        </div>
        <div class="remark" v-html="item.content"></div>
      </div>
    </div>
    <p class="no_data">
      <svg
        t="1631889983213"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="11311"
        width="32"
        height="32"
      >
        <path
          d="M130.21184 460.1344c-8.2176-0.33792-15.91296 5.89312-16.50176 14.45888a15.53408 15.53408 0 0 0 14.45376 16.50176 364.1344 364.1344 0 0 0 22.14912 0.5888c51.58912 0 178.77504-8.27904 236.03712-85.95968 5.12-6.8864 3.63008-16.59904-3.25632-21.6832a15.47776 15.47776 0 0 0-21.6832 3.25632C300.26752 470.2464 131.9168 460.288 130.21184 460.1344zM646.58432 387.26656a15.5392 15.5392 0 0 0-21.6832-3.2256 15.5136 15.5136 0 0 0-3.26144 21.6832c57.4208 77.67552 184.64256 85.95968 236.20096 85.95968 12.59008 0 20.6592-0.49664 22.11328-0.61952 8.56064-0.5888 15.01696-7.97184 14.45376-16.50176s-7.29088-15.10912-16.50176-14.45376c-1.6128 0.20992-169.99424 10.10688-231.3216-72.84224zM364.416 365.11744c7.44448 0 14.9248-0.61952 22.08768-1.95072 8.40704-1.55136 14.02368-9.61536 12.4416-18.05312s-9.61536-14.0544-18.08384-12.40576c-19.70176 3.63008-40.88832 0-50.0992-5.58592a15.55456 15.55456 0 0 0-21.30944 5.18144 15.47776 15.47776 0 0 0 5.18144 21.27872c12.1856 7.40864 30.83264 11.53536 49.78176 11.53536zM673.63328 329.6256c-17.80736 9.24672-39.45984 12.19072-49.88416 9.83552-8.46336-1.95584-16.6912 3.28704-18.6112 11.63264s3.29216 16.65536 11.62752 18.58048c4.59264 1.05472 9.77408 1.55136 15.29856 1.55136 17.52064 0 38.62016-5.12 55.86432-14.08 7.59808-3.9424 10.5728-13.312 6.6048-20.91008s-13.39392-10.48576-20.89984-6.60992zM500.38272 704.57856c119.80288 0 206.93504-68.09088 210.56512-70.97856a15.4624 15.4624 0 0 0 2.51392-21.77536 15.47264 15.47264 0 0 0-21.77536-2.51392c-0.80896 0.61952-82.176 64.25088-191.3088 64.25088-106.98752 0-165.6832-61.9776-166.272-62.63296a15.54432 15.54432 0 0 0-21.89824-0.86528 15.5136 15.5136 0 0 0-0.93184 21.86752c2.70336 2.97472 67.87584 72.64768 189.1072 72.64768z"
          fill="#bfbfbf"
          p-id="11312"
        ></path>
        <path
          d="M861.08672 807.6544c83.09248-88.51968 130.14528-206.2848 130.14528-328.41216 0-6.2208-0.15872-12.40576-0.39424-18.57536l-0.128-3.48672a484.736 484.736 0 0 0-1.1264-17.56672c-0.10752-1.29536-0.2304-2.59072-0.34304-3.88608a487.58784 487.58784 0 0 0-1.88928-17.64352c-0.09728-0.74752-0.21504-1.4848-0.31744-2.2272a470.44096 470.44096 0 0 0-2.41664-16.03584c-0.22016-1.3056-0.42496-2.6112-0.65024-3.91168a463.19104 463.19104 0 0 0-4.23424-21.13536 467.10272 467.10272 0 0 0-3.91168-16.26624c-0.34304-1.32096-0.72192-2.6368-1.0752-3.95264a480.24064 480.24064 0 0 0-4.3264-15.08352c-0.30208-0.98816-0.5888-1.98656-0.896-2.97984a476.86144 476.86144 0 0 0-5.30944-15.87712c-0.31744-0.90112-0.58368-1.81248-0.90624-2.7136-0.0512-0.14848-0.13824-0.26624-0.19456-0.41472-34.23744-95.19616-97.792-176.50688-179.72224-233.0112-0.33792-0.27648-0.62976-0.59392-0.9984-0.8448a476.14464 476.14464 0 0 0-137.2928-64.81408c-1.04448-0.30208-2.08896-0.60928-3.13856-0.90624a476.40064 476.40064 0 0 0-9.6256-2.6112c-1.62816-0.42496-3.27168-0.81408-4.90496-1.21856a464.62464 464.62464 0 0 0-14.21312-3.29728 451.97312 451.97312 0 0 0-14.68416-2.944 490.95168 490.95168 0 0 0-12.32384-2.09408c-1.94048-0.30208-3.8912-0.57344-5.8368-0.85504a479.5904 479.5904 0 0 0-11.25888-1.4848c-1.7664-0.20992-3.52768-0.41984-5.29408-0.60928a478.1824 478.1824 0 0 0-15.17056-1.41824c-0.6912-0.0512-1.3824-0.08192-2.06848-0.128a478.32064 478.32064 0 0 0-18.46272-0.95744A509.30176 509.30176 0 0 0 512.01536 0C247.7824 0 32.77312 214.97344 32.77312 479.24224c0 124.30848 48.78336 244.1984 134.62528 332.97408-18.0224 5.49376-32.25088 14.1824-41.28256 24.69376-18.51904 21.62688-16.19456 49.44896 6.144 72.71424a15.5648 15.5648 0 0 0 7.29088 4.28544c77.73696 20.10112 97.06496 45.04064 101.65248 58.13248 5.02272 14.3616-3.2256 25.92768-3.78368 26.6496a15.52896 15.52896 0 0 0 2.66752 21.65248 15.48288 15.48288 0 0 0 21.77536-2.57536c7.13728-9.05728 17.02912-30.86336 8.84224-55.2448-11.20256-33.2288-51.18464-59.28448-118.87104-77.46048-12.8768-15.50848-4.93056-24.72448-2.23744-27.91936 20.91008-24.41728 101.93408-37.25824 188.9792 23.95136 113.3824 79.5648 101.19168 119.8592 101.28384 119.8592a15.47776 15.47776 0 0 0 6.51264 20.9408c2.29376 1.20832 4.77696 1.80224 7.19872 1.80224 5.5808 0 10.9824-3.04128 13.83424-8.3456 5.24288-9.984 24.53504-64.58368-110.92992-159.6672-54.46144-38.28736-108.22144-51.52256-151.14752-49.65376C115.33824 721.7664 63.7952 602.84416 63.7952 479.24224a449.44384 449.44384 0 0 1 9.12384-90.21952c0.74752-3.64544 1.54112-7.2704 2.37568-10.88 45.96736-198.61504 224.32768-347.11552 436.736-347.12064h0.08704c4.98688 0 9.96352 0.11264 14.93504 0.2816 1.3824 0.04608 2.75456 0.1024 4.13184 0.15872 4.352 0.18432 8.68864 0.42496 13.02016 0.72704 0.71168 0.0512 1.42848 0.08192 2.14016 0.13824a441.53344 441.53344 0 0 1 19.21536 1.90976c3.39968 0.40448 6.79424 0.85504 10.18368 1.34144 2.08896 0.30208 4.18304 0.59904 6.26688 0.92672a427.75552 427.75552 0 0 1 24.448 4.57216c4.7104 1.01376 9.3952 2.0992 14.0544 3.26144 1.32096 0.32768 2.64192 0.64 3.95776 0.98304 3.07712 0.79872 6.13888 1.63328 9.19552 2.49344l2.64192 0.76288c139.07456 40.20736 250.52672 146.10944 298.43968 281.76896a446.7712 446.7712 0 0 1 5.34528 15.98976c0.12288 0.41472 0.24064 0.83456 0.36864 1.24928a447.744 447.744 0 0 1 4.50048 15.68768c0.24576 0.9216 0.50688 1.83808 0.74752 2.75968a436.89984 436.89984 0 0 1 4.608 19.51744 422.0416 422.0416 0 0 1 3.11808 15.95904c0.18432 1.04448 0.34304 2.08896 0.52224 3.13344a447.6416 447.6416 0 0 1 2.36544 15.66208c0.0768 0.55296 0.15872 1.1008 0.2304 1.65376a441.3952 441.3952 0 0 1 1.792 16.70144 453.23264 453.23264 0 0 1 1.37216 19.98336c0.04608 1.07008 0.08192 2.14528 0.11776 3.21536 0.22016 5.7856 0.36864 11.58144 0.36864 17.39776 0 123.83232-51.73248 242.8416-142.03904 327.3984-37.83168 3.43552-81.52064 18.02752-125.63968 49.07008-135.6544 95.0784-116.1728 149.73952-110.89408 159.69792a16.24064 16.24064 0 0 0 14.2336 8.59136c2.3552 0 4.71552-0.53248 6.94272-1.60768 7.57248-4.00384 10.6752-12.96896 6.67136-20.54144-0.14848-0.39936-13.27616-40.66816 100.9152-120.69888 86.98368-61.13792 168.06912-48.3584 188.97408-23.95136 2.72896 3.16416 10.6752 12.41088-2.2016 27.91936-67.77856 18.18112-107.76576 44.2368-118.93248 77.46048-8.192 24.38144 1.7664 46.21824 8.89856 55.28064a15.60064 15.60064 0 0 0 21.8112 2.53952 15.55968 15.55968 0 0 0 2.53952-21.80608c-0.09216-0.09728-8.71424-11.60704-3.84512-26.12224 4.4032-13.184 23.54688-38.31296 101.8112-58.53696a15.9232 15.9232 0 0 0 7.29088-4.28032c22.30272-23.2704 24.69376-51.1232 6.144-72.71424-12.21632-14.26944-34.00192-25.15456-61.7984-29.30176z"
          fill="#bfbfbf"
          p-id="11313"
        ></path>
      </svg>
      <span> 暂无评论</span>
    </p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      comments: {},
    };
  },
  created() {
    this.getComment();
  },
  methods: {
    getComment() {
      this.axios
        .get(`https://cnodejs.org/api/v1/topic/${this.$route.params.id}`)
        .then((res) => {
          this.comments = res.data.data;
          console.log(this.comments);
        })
        .catch((error) => {
          console.log(error);
        });
    },
    formatDate(time) {
      time = (Date.now() - new Date(time).getTime()) / 1000;
      if (time < 3600) {
        return ~~(time / 60) + "分钟前";
      } else if (time < 86400) {
        return ~~(time / 3600) + "小时前";
      } else if (time < 2592000) {
        return ~~(time / 86400) + "天前";
      } else if (time < 31104000) {
        return ~~(time / 2592000) + "个月前";
      } else {
        return ~~(time / 31104000) + "年前";
      }
    },
  },
};
</script>

<style lang='less'>
.discuss {
  .com_title {
    height: 35px;
    line-height: 35px;
    color: #8e8e8e;
    padding-left: 10px;
    background-color: #fafafa;
  }
  .comments-box {
    .com_content {
      padding: 0 15px;
      border-bottom: solid #f6f6f6 1px;
      margin-bottom: 10px;
      .user_info {
        display: flex;
        justify-content: space-around;
        .left {
          display: flex;
          align-items: center;
          width: 80vw;
          .avatar {
            width: 35px;
            height: 35px;
          }
          .login_name {
            font-size: 18px;
            color: #666;
            margin: 0 10px 0 5px;
          }
          .floor {
            color: #5d8ef7;
            font-size: 14px;
          }
        }
      }
      .remark {
        font-size: 14px;
        color: #333333;
      }
    }
  }
  .no_data {
    font-size: 20px;
    color: rgb(168, 165, 165);
    text-align: center;
  }
}
</style>